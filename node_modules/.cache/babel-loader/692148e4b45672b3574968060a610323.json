{"remainingRequest":"F:\\HBuilderX\\projects\\test\\node_modules\\babel-loader\\lib\\index.js!F:\\HBuilderX\\projects\\test\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\HBuilderX\\projects\\test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\HBuilderX\\projects\\test\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\HBuilderX\\projects\\test\\src\\views\\Login.vue","mtime":1635904687191},{"path":"F:\\HBuilderX\\projects\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634817181958},{"path":"F:\\HBuilderX\\projects\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":1634817211862},{"path":"F:\\HBuilderX\\projects\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634817181958},{"path":"F:\\HBuilderX\\projects\\test\\node_modules\\vue-loader\\lib\\index.js","mtime":1634817206149}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TopNav from \"../components/TopNav.vue\";\nexport default {\n  name: 'Login',\n  data: function data() {\n    return {\n      rules: {\n        username: [{\n          required: true,\n          message: '用户名未填写',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码未填写',\n          trigger: 'blur'\n        }]\n      },\n      loginForm: {\n        username: '',\n        password: ''\n      }\n    };\n  },\n  components: {\n    TopNav: TopNav\n  },\n  methods: {\n    submitLoginForm: function submitLoginForm() {\n      var _this = this;\n\n      this.$refs.loginForm.validate(function (valid) {\n        if (valid) {\n          // console.log(this.loginForm)\n          _this.loading = true; // this.loading = false\n          // sessionStorage.setItem('isFirstLogin',true)\n          // this.$router.push('/home')\n          // sessionStorage.setItem('isFirstLogin',false)\n          // this.$router.push('/menu')\n\n          _this.$ajax('/api/login', _this.loginForm).then(function (resp) {\n            if (resp) {\n              _this.loading = false;\n              console.log(resp.data.data); // sessionStorage.setItem('isFirstLogin',true)\n\n              sessionStorage.setItem('isFirstLogin', JSON.stringify(resp.data.data.isFirstLogin));\n\n              if (sessionStorage.getItem('isFirstLogin')) {\n                _this.$router.push('/menu');\n              } else {\n                _this.$router.push('/home');\n              }\n            }\n          });\n        } else {\n          _this.$message.error('请填写完整'); // console.log('请填写完整')\n\n\n          return false;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,OAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,QAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CADA;AAEA,QAAA,QAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA;AAFA,OADA;AAKA,MAAA,SAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA;AALA,KAAA;AAUA,GAbA;AAcA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAdA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,6BACA;AAAA;;AACA,WAAA,KAAA,CAAA,SAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,IAAA,CAFA,CAIA;AACA;AACA;AACA;AACA;;AAEA,UAAA,KAAA,CAAA,KAAA,CAAA,YAAA,EAAA,KAAA,CAAA,SAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,gBAAA,IAAA,EAAA;AACA,cAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,EAFA,CAGA;;AACA,cAAA,cAAA,CAAA,OAAA,CAAA,cAAA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,YAAA,CAAA;;AACA,kBAAA,cAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,eAFA,MAEA;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA;AAEA;AACA,WAbA;AAcA,SAxBA,MAwBA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,OAAA,EADA,CAEA;;;AACA,iBAAA,KAAA;AACA;AACA,OA9BA;AA+BA;AAjCA;AAjBA,CAAA","sourcesContent":["<template>\n  <div id=\"loginBox\">\r\n\t<TopNav title=\"登录\" :canBack='false'/>\r\n\t<img alt=\"Vue logo\" src=\"../assets/logo.png\">\n\t<el-form label-position=\"left\" label-width=\"auto\"\r\n\t:rules=\"rules\" ref=\"loginForm\" :model=\"loginForm\">\r\n\t\t<el-form-item prop=\"username\" label=\"用户名\">\r\n\t\t\t<el-input\r\n\t\t\ttype=\"text\"\r\n\t\t\tauto-complete=\"false\"\r\n\t\t\tv-model=\"loginForm.username\"\r\n\t\t\tplaceholder=\"用户名\">\r\n\t\t\t<template slot=\"prepend\">\r\n\t\t\t\t<i class=\"el-icon-user-solid\"></i>\r\n\t\t\t</template>\r\n\t\t\t</el-input>\r\n\t\t</el-form-item>\r\n\t\t<el-form-item prop=\"password\" label=\"密码\">\r\n\t\t\t<el-input\r\n\t\t\ttype=\"password\"\r\n\t\t\tauto-complete=\"false\"\r\n\t\t\tv-model=\"loginForm.password\"\r\n\t\t\tplaceholder=\"密码\">\r\n\t\t\t<template slot=\"prepend\">\r\n\t\t\t\t<i class=\"el-icon-lock\"></i>\r\n\t\t\t</template>\r\n\t\t\t</el-input>\r\n\t\t</el-form-item>\r\n\t\t<el-link href=\"http://localhost:8080/#/sign\" type=\"primary\" :underline=\"false\">注册</el-link>\r\n\t\t<el-button type=\"primary\" style=\"width:100%\" \r\n\t\t@click=\"submitLoginForm()\">登陆</el-button>\r\n\t</el-form>\n  </div>\n</template>\n\n<script>\r\nimport TopNav from '../components/TopNav.vue'\nexport default {\r\n\tname: 'Login',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trules: {\r\n\t\t\t\tusername: [{ required: true, message: '用户名未填写', trigger: 'blur'}],\r\n\t\t\t\tpassword: [{ required: true, message: '密码未填写', trigger: 'blur'}]\r\n\t\t\t},\r\n\t\t\tloginForm: {\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t}\r\n\t\t}\n\t},\r\n\tcomponents: {\r\n\t\tTopNav\r\n\t},\r\n\tmethods: {\r\n\t\tsubmitLoginForm() {\r\n\t\t\tthis.$refs.loginForm.validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\t// console.log(this.loginForm)\r\n\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\t\r\n\t\t\t\t\t// this.loading = false\r\n\t\t\t\t\t// sessionStorage.setItem('isFirstLogin',true)\r\n\t\t\t\t\t// this.$router.push('/home')\r\n\t\t\t\t\t// sessionStorage.setItem('isFirstLogin',false)\r\n\t\t\t\t\t// this.$router.push('/menu')\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.$ajax('/api/login', this.loginForm).then((resp) => {\r\n\t\t\t\t\t\tif (resp) {\r\n\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t\tconsole.log(resp.data.data)\r\n\t\t\t\t\t\t\t// sessionStorage.setItem('isFirstLogin',true)\r\n\t\t\t\t\t\t\tsessionStorage.setItem('isFirstLogin',JSON.stringify(resp.data.data.isFirstLogin))\r\n\t\t\t\t\t\t\tif (sessionStorage.getItem('isFirstLogin')) {\r\n\t\t\t\t\t\t\t\tthis.$router.push('/menu')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$router.push('/home')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error('请填写完整')\r\n\t\t\t\t\t// console.log('请填写完整')\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\r\n\t#loginBox{\r\n\t\ttext-align: center;\r\n\t}\n</style>\n"],"sourceRoot":"src/views"}]}